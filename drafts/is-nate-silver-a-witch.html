

<head>
    <meta charset="utf-8" />
    <title>Is Nate Silver a Witch?</title>
    <meta name="author" content="Ben Hamner" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <style type="text/css">
    body {
        background-color: #eee;
        text-rendering: optimizeLegibility;
        color: #222;
        margin: 0px;
        padding: 0px;
        margin-top: 8%;
        width: 100%;
        font-family: 'Alegreya';
        text-align: center;
    }

    #main {
        margin: auto;
        width: 44em;
        text-align: center;
    }

    #explanation {
        margin: auto;
        margin-top:3em;
        width: 38em;
        text-align: left;
        font-weight: normal;
        font-size:18px;
        font-color: #666;
    }

    h1 {
        color: #24E;
        font-weight: normal;
        font-size: 84px;
        margin: 0px;
    }

    h2 {
        color: #666;
        font-weight: normal;
        font-size: 54px;
        margin: 0px;
    }

    h3 {
        color: #999;
        font-weight: normal;
        font-size: 36px;
        margin: 0px;
    }

    #percentAllCorrect {
        font-weight: bold;
        color: #000;
    }

    #slider {
        margin: 0.5em;
    }

    a:link {
        color: #666;
        text-decoration: none;
    }

    a:visited {
        color: #666;
        text-decoration: none;
    }

    a:hover {
        color: #999;
        text-decoration: none;
    }

    a:active {
        color: #666;
        text-decoration: none;
    }

    .ui-slider a {outline:none;}
    </style>
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <script src="/js/jquery.ui.touch-punch.min.js"></script>
    <script type="text/javascript"src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>
<div id="main">
<h3>Based on your prior belief of a</h3>
<h2><span id="prior">1</span>% chance</h2>
<div id="slider"></div>
<h3>Nate Silver is a witch,</h3>
<h2>there is now a</h2>
<h1><span id="posterior">88</span>% chance</h1>
<h2>Nate Silver is a witch</h2>
</div>
<div id="explanation">
<p>
    As <a href="https://twitter.com/josh_wills">Josh Wills</a> <a href="https://twitter.com/josh_wills/status/266278477077020672">pointed out</a>, <a href="http://isnatesilverawitch.com">isnatesilverawitch.com</a> has a dissapointing methodology: it doesn't use any data!
    <div style="text-align:center;margin:0em"><img src="/img/josh_wills_isnatesilverawitch_tweet.png" style="margin:1em;text-align:center"></img></div><br />
To answer this question more quantitatively, we made a couple assumptions:
    <ul>
        <li>Nate Silver's final November 6 predictions represent the true probability of Obama winning the state.</li>
        <li>Election outcomes in one state don't depend on another state</li>
        <li>If Nate Silver is a witch, then he would get every state correct
            <ul>
                <li>In Bayesian terms, \(P(\text{AllStatesRight} | \text{NateIsAWitch}) = 1\)</li>
            </ul>
        </li>
    </ul>
    This enables us to calculate the probability of Nate Silver correctly calling all 50 states plus Washington DC. Nate Silver had a <span id="percentAllCorrect">12.53% chance</span> of correctly calling each state.
</p>
<p>
    This probability was calculated by executing the following javascript code on fivethirtyeight.com:
    <pre style='color:#000000;font-size:12px;margin-left:2em'>nytg<span style='color:#808030; '>.</span>stateData<span style='color:#808030; '>.</span>forecast<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>.</span>states
    <span style='color:#808030; '>.</span>map<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span><span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#800080; '>{</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>stateAbbreviation</span><span style='color:#800000; '>"</span><span style='color:#800080; '>:</span> x<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>pObamaWinsState</span><span style='color:#800000; '>"</span><span style='color:#800080; '>:</span> x<span style='color:#808030; '>[</span><span style='color:#008c00; '>5</span><span style='color:#808030; '>]</span><span style='color:#808030; '>/</span><span style='color:#008c00; '>100</span><span style='color:#800080; '>}</span><span style='color:#800080; '>;</span><span style='color:#800080; '>}</span><span style='color:#808030; '>)</span>
    <span style='color:#808030; '>.</span>filter<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span><span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#800000; font-weight:bold; '>isNaN</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>parseInt</span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>.</span>stateAbbreviation<span style='color:#808030; '>[</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#800080; '>}</span><span style='color:#808030; '>)</span>
    <span style='color:#808030; '>.</span>map<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span><span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#808030; '>[</span>x<span style='color:#808030; '>.</span>pObamaWinsState<span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>-</span>x<span style='color:#808030; '>.</span>pObamaWinsState<span style='color:#808030; '>]</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>max</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#800080; '>}</span><span style='color:#808030; '>)</span>
    <span style='color:#808030; '>.</span>reduce<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span><span style='color:#800000; font-weight:bold; '>return</span> x<span style='color:#808030; '>*</span>y<span style='color:#800080; '>;</span><span style='color:#800080; '>}</span><span style='color:#808030; '>)</span>
</pre>
</p>

</div>

<script type="text/javascript" src="../js/d3.v2.js"></script>
    <script>
    function pWitch(prior) {
        var pAllStatesCorrect = 0.12534990602465945;
        return prior / (prior + (1-prior)*pAllStatesCorrect);
    }

    function updateProbabilities(priorPercent) {

        $("#prior")[0].innerHTML=priorPercent;
        $("#posterior")[0].innerHTML=Math.round(pWitch(priorPercent/100)*1000)/10;
    }

    $(function() {
        $( "#slider" ).slider(
            {value: 1,
             step: 0.1,
             create: function(event, ui) {
                updateProbabilities(1)
            },
             slide: function(event, ui) {
                updateProbabilities(ui.value)
            } });
    });

    </script>
</body>
